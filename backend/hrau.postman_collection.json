{
  "info": {
    "name": "HR Automation API (–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_isSubVersion": true
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:8080" },
    { "key": "directionId", "value": "1" },
    { "key": "userId", "value": "3" },
    { "key": "applicationId", "value": "" },
    { "key": "attemptId", "value": "" },
    { "key": "token", "value": "" }
  ],
  "item": [
    {
      "name": "üîê Auth",
      "item": [
        {
          "name": "üë§ Login USER (user@example.com)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "pm.collectionVariables.set(\"token\", jsonData.token);",
                  "console.log('‚úÖ Token saved:', jsonData.token);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"] },
            "body": { "mode": "raw", "raw": "{\"email\": \"user@example.com\", \"password\": \"1\"}" }
          }
        },
        {
          "name": "üëë Login ADMIN (–¥–ª—è HR —Ä—É—á–µ–∫)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.collectionVariables.set(\"token\", pm.response.json().token);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"] },
            "body": { "mode": "raw", "raw": "{\"email\": \"admin@example.com\", \"password\": \"1\"}" }
          }
        },
        {
          "name": "‚ÑπÔ∏è Me (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": { "raw": "{{baseUrl}}/auth/me", "host": ["{{baseUrl}}"], "path": ["auth", "me"] }
          }
        }
      ]
    },
    {
      "name": "üìã Public",
      "item": [
        {
          "name": "üìÇ –í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/public/directions?only_applied=false", "host": ["{{baseUrl}}"], "path": ["public", "directions"], "query": [{ "key": "only_applied", "value": "false" }] }
          }
        }
      ]
    },
    {
      "name": "üöÄ –ü–æ–ª–Ω—ã–π Apply + Test Workflow",
      "item": [
        {
          "name": "1Ô∏è‚É£ –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É (Apply)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"‚úÖ –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.collectionVariables.set(\"applicationId\", pm.response.json().id || 1);",
                  "console.log('‚úÖ applicationId:', pm.collectionVariables.get(\"applicationId\"));"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/directions/apply/{{directionId}}", "host": ["{{baseUrl}}"], "path": ["directions", "apply", "{{directionId}}"] },
            "body": { "mode": "raw", "raw": "{\"resumePath\": \"resume.pdf\", \"comment\": \"Junior Backend Developer\"}" }
          }
        },
        {
          "name": "2Ô∏è‚É£ –°—Ç–∞—Ä—Ç —Ç–µ—Å—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"‚úÖ –¢–µ—Å—Ç –∑–∞–ø—É—â–µ–Ω\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "const jsonData = pm.response.json();",
                  "pm.collectionVariables.set(\"attemptId\", jsonData.attempt_id);",
                  "console.log('‚úÖ attemptId:', jsonData.attempt_id);",
                  "console.log('üìù –í–æ–ø—Ä–æ—Å–æ–≤:', jsonData.questions.length);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/test/start", "host": ["{{baseUrl}}"], "path": ["test", "start"] },
            "body": { "mode": "raw", "raw": "{\"application_id\": {{applicationId}}}" }
          }
        },
        {
          "name": "3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã (–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": { "raw": "{{baseUrl}}/test/questions/{{attemptId}}", "host": ["{{baseUrl}}"], "path": ["test", "questions", "{{attemptId}}"] }
          }
        },
        {
          "name": "4Ô∏è‚É£ –°–¥–∞—Ç—å —Ç–µ—Å—Ç ‚ùå –ü–†–û–í–ê–õ (20/40 < 25 = –ê–í–¢–û–ö–ò–ö)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"‚ùå –ü–†–û–í–ê–õ\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.score).to.eql(20);",
                  "    pm.expect(jsonData.max_score).to.eql(40);",
                  "    console.log('üß™ –ê–≤—Ç–æ–∫–∏–∫ —Å—Ä–∞–±–æ—Ç–∞–ª!');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/test/submit", "host": ["{{baseUrl}}"], "path": ["test", "submit"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"attempt_id\": {{attemptId}},\n  \"answers\": [\n    {\"question_id\": 1, \"selected_option_id\": 1},\n    {\"question_id\": 2, \"selected_option_id\": 1},\n    {\"question_id\": 3, \"selected_option_id\": 2},\n    {\"question_id\": 4, \"selected_option_id\": 1}\n  ]\n}"
            }
          }
        },
        {
          "name": "4Ô∏è‚É£ –°–¥–∞—Ç—å —Ç–µ—Å—Ç ‚úÖ –ü–†–û–•–û–î (40/40)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"‚úÖ –ü–†–û–•–û–î\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.score).to.eql(40);",
                  "    pm.expect(jsonData.max_score).to.eql(40);",
                  "    console.log('üéâ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω!');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/test/submit", "host": ["{{baseUrl}}"], "path": ["test", "submit"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"attempt_id\": {{attemptId}},\n  \"answers\": [\n    {\"question_id\": 1, \"selected_option_id\": 4},\n    {\"question_id\": 2, \"selected_option_id\": 3},\n    {\"question_id\": 3, \"selected_option_id\": 1},\n    {\"question_id\": 4, \"selected_option_id\": 2}\n  ]\n}"
            }
          }
        },
        {
          "name": "5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": { "raw": "{{baseUrl}}/apply-info/directions/{{directionId}}", "host": ["{{baseUrl}}"], "path": ["apply-info", "directions", "{{directionId}}"] }
          }
        }
      ]
    },
    {
      "name": "üëë HR/Admin",
      "item": [
        {
          "name": "–ü–µ—Ä–µ–≤–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/hr/applications/status", "host": ["{{baseUrl}}"], "path": ["hr", "applications", "status"] },
            "body": { "mode": "raw", "raw": "{\"application_id\": {{applicationId}}, \"direction_status_sequence\": 2}" }
          }
        }
      ]
    },
    {
      "name": "üîì Public Info",
      "item": [
        {
          "name": "–ò–Ω—Ñ–æ –ø–æ –∑–∞—è–≤–∫–µ (—Ç–µ–∫—É—â–∏–π —é–∑–µ—Ä)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": { "raw": "{{baseUrl}}/apply-info/directions/{{directionId}}", "host": ["{{baseUrl}}"], "path": ["apply-info", "directions", "{{directionId}}"] }
          }
        },
        {
          "name": "–ò–Ω—Ñ–æ –ø–æ –∑–∞—è–≤–∫–µ —é–∑–µ—Ä–∞ (HR/ADMIN)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{token}}" }],
            "url": { "raw": "{{baseUrl}}/apply-info/directions/{{directionId}}?user_id={{userId}}", "host": ["{{baseUrl}}"], "path": ["apply-info", "directions", "{{directionId}}"], "query": [{ "key": "user_id", "value": "{{userId}}" }] }
          }
        }
      ]
    }
  ]
}
